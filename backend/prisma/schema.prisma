// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js" //ตัวสร้างฐานข้อมูล
}

datasource db {
  provider = "postgresql" //ฐานข้อมูลที่ใช้งาน
}

model User {
  id        String   @id @default(cuid()) //รหัสผู้ใช้งาน (อัตโนมัติ) คาดเดายากมาก
  email     String   @unique //ห้ามซ้ำ
  name      String //ชื่อผู้ใช้งาน
  username  String   @unique //username สำหรับ URL (เช่น "Lun")
  password  String //รหัสผ่าน
  createdAt DateTime @default(now()) //วันที่สร้าง อัตโนมัติ
  updatedAt DateTime @updatedAt //วันที่แก้ไข อัตโนมัติ

  // Relations
  heroSection    HeroSection?
  aboutSection   AboutSection?
  projects       Project[]
  reviews        Review[]
  contactRequests ContactRequest[]

  @@map("users") //ชื่อตารางในฐานข้อมูล
}

model ContactRequest {
  //ใช้เก็บข้อมูที่กรอกมาจากหน้าเว็บ Contact Us
  id        String   @id @default(uuid()) 
  name      String
  email     String
  message   String   @db.Text //ใช้ Text เพราะจะเก็บได้ยาวกว่า String
  status    String   @default("new") // new, read, replied //สถานะการข้อมูล
  userId    String   // Foreign key to User
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("contact_requests") //ชื่อตารางในฐานข้อมูล
}
// --- 1. สำหรับหน้า Portfolio (เก็บผลงาน) ---
model Project {
  id          String   @id @default(uuid()) //รหัสผลงาน (อัตโนมัติ) คาดเดายากมาก
  title       String //ชื่อผลงาน
  description String?  @db.Text //ใช้ Text เพราะจะเก็บได้ยาวกว่า String
  imageUrl    String?  // ลิงก์รูปภาพ
  link        String?  // ลิงก์ไปเว็บผลงาน
  userId      String   // Foreign key to User
  createdAt   DateTime @default(now()) //วันที่สร้าง อัตโนมัติ
  updatedAt   DateTime @updatedAt //วันที่แก้ไข อัตโนมัติ

  // Relations
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("projects") //ชื่อตารางในฐานข้อมูล
}

// --- 2. สำหรับหน้า Review (เก็บรีวิวลูกค้า) ---
model Review {
  id        String   @id @default(uuid()) //รหัสรีวิว (อัตโนมัติ) คาดเดายากมาก
  name      String   // ชื่อคนรีวิว
  rating    Int      @default(5) // ดาว (1-5)
  comment   String   @db.Text //ใช้ Text เพราะจะเก็บได้ยาวกว่า String
  avatarUrl String?  // รูปโปรไฟล์คนรีวิว
  userId    String   // Foreign key to User
  createdAt DateTime @default(now())

  // Relations
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("reviews") //ชื่อตารางในฐานข้อมูล
}

// --- 3. สำหรับหน้า Home (เก็บข้อความ Welcome) ---
// แต่ละ user จะมี HeroSection ของตัวเอง
model HeroSection {
  id          String   @id @default(uuid()) // เปลี่ยนเป็น String UUID
  title       String   @default("Welcome") 
  description String?  @default("This is My First Project.")
  imageUrl    String?  // รูป Background หรือรูปคน
  userId      String   @unique // Foreign key to User (one-to-one)
  updatedAt   DateTime @updatedAt

  // Relations
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("hero_sections") //ชื่อตารางในฐานข้อมูล
}

// --- 4. สำหรับหน้า About (เก็บประวัติ) ---
// แต่ละ user จะมี AboutSection ของตัวเอง
model AboutSection {
  id          String   @id @default(uuid()) // เปลี่ยนเป็น String UUID
  title       String   @default("About Me") //ชื่อหน้า About
  description String?  @db.Text //ใช้ Text เพราะจะเก็บได้ยาวกว่า String
  imageUrl    String?  //รูปภาพหน้า About อาจจะไม่มี
  userId      String   @unique // Foreign key to User (one-to-one)
  updatedAt   DateTime @updatedAt //วันที่แก้ไข อัตโนมัติ เป็นการอัปเดตข้อมูลหน้า About

  // Relations
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("about_sections") //ชื่อตารางในฐานข้อมูล
}